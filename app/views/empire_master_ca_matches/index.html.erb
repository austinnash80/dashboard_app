<p id="notice"><%= notice %></p>

<h1 class="text-center">Empire Master CA Matches</h1>
<div class="m-3"><p class="text-center"><%= link_to 'CA List Table', empire_master_ca_lists_path(), class: 'btn btn-sm btn-outline-success w200 m-1' %> </p></div>
<div class="m-3"><p class="text-center"><%= link_to 'Empire States Table', empire_states_path(), class: 'btn btn-sm btn-outline-primary w200 m-1' %> <%= link_to 'List Data Home Page', list_data_hp_empire_states_path(), class: 'btn btn-sm btn-outline-primary w200 m-1' %></p></div>

<div class="m-5">
  <p><%= link_to 'Run Match', empire_master_ca_matches_path(run: 'yes'), class: 'btn btn-sm btn-outline-info'%></p>
<p class="fs-4">Upload New List</p>
  <%= form_tag import_empire_master_ca_matches_path, multipart: true do %>
  <%= file_field_tag :file, class: 'btn btn-sm btn-light' %>
  <%= submit_tag 'Upload', class: 'btn btn-sm btn-primary text-light' %>
<% end %>

<% if params['remove_all'] == 'yes' %>
  <p><%= link_to "Confirm Delete", empire_master_ca_matches_path(remove_all: 'yes', confirm: 'yes'), class: 'btn btn-sm btn-danger mt-4' %></p>
<% else %>
  <p><%= link_to "Remove All Records", empire_master_ca_matches_path(remove_all: 'yes'), class: 'btn btn-sm btn-warning mt-4' %></p>
<% end %>

<p><%= link_to 'Export List (csv)', empire_master_ca_matches_path('csv'), class: 'btn btn-sm btn-secondary text-light mt-2 w150' %></p>
<p><%= link_to 'Bulk Match', empire_master_ca_matches_path(match: 'bulk', run: 'yes'), target: :_blank, class: 'btn btn-sm btn-outline-success mt-2 w150' %></p>

<br>
<table class="table table-striped">
  <thead>
    <caption class="caption-top">Total Records: <%= number_with_delimiter(EmpireMasterCaMatch.count) %> | Display Limit: 250</caption>
    <tr class="bg-secondary bg-gradient text-light">
      <th>St</th>
      <th>Lid</th>
      <th>List</th>
      <th>Exp</th>
      <th>Lic</th>
      <th>Uid</th>
      <th>Lname</th>
      <th>Search date</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @empire_master_ca_matches.order(search_date: :desc).limit(250).each do |empire_master_ca_match| %>
      <tr>
        <td><%= empire_master_ca_match.st %></td>
        <td><%= empire_master_ca_match.lid %></td>
        <td><%= empire_master_ca_match.list %></td>
        <td><%= empire_master_ca_match.exp %></td>
        <td><%= empire_master_ca_match.lic %></td>
        <td><%= empire_master_ca_match.uid %></td>
        <td><%= empire_master_ca_match.lname %></td>
        <td><%= empire_master_ca_match.search_date %></td>
        <td><%= link_to 'Show', empire_master_ca_match %></td>
        <td><%= link_to 'Edit', edit_empire_master_ca_match_path(empire_master_ca_match) %></td>
        <td><%= link_to 'Destroy', empire_master_ca_match, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
